{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/WORK/Projects/DevConnector/client/app/hooks/useProfile.ts"],"sourcesContent":["/** @format */\r\n\r\n'use client';\r\n\r\nimport { useCallback } from 'react';\r\nimport { redirect } from 'next/navigation';\r\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\r\nimport { addAlert } from '../store/slices/alertSlice';\r\nimport { clearError, clearProfile, createUpdateProfile, getCurrentProfile, getProfileById } from '../store/slices/profileSlice';\r\n\r\nexport const useProfile = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst profileState = useAppSelector((state) => state.profile);\r\n\t\r\n\t// Wrap in useCallback to prevent recreating on every render\r\n\tconst fetchCurrentProfile = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await dispatch(getCurrentProfile()).unwrap();\r\n\t\t\tif(!response){\r\n\t\t\t\tredirect('/profile-form');\r\n\t\t\t}\r\n\t\t\treturn response;\r\n\t\t} catch (error) {\r\n\t\t\tconst errorMsg = error as string;\r\n\t\t\tdispatch(\r\n\t\t\t\taddAlert({\r\n\t\t\t\t\tid: `${Date.now()}`,\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage: errorMsg,\r\n\t\t\t\t\tduration: 5000,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, [dispatch]);\r\n\r\n    const fetchProfileById = useCallback(async (userId: string) => {\r\n\t\ttry {\r\n\t\t\tconst response = await dispatch(getProfileById(userId)).unwrap();\r\n\t\t\treturn response;\r\n\t\t} catch (error) {\r\n\t\t\tconst errorMsg = error as string;\r\n\t\t\tdispatch(\r\n\t\t\t\taddAlert({\r\n\t\t\t\t\tid: `${Date.now()}`,\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage: errorMsg,\r\n\t\t\t\t\tduration: 5000,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t}, [dispatch]);\r\n\r\n    const saveProfile = useCallback(async (profileData: any) => {\r\n\t\ttry {\r\n\t\t\tconst response = await dispatch(createUpdateProfile(profileData)).unwrap();\r\n\t\t\t// addAlert({\r\n\t\t\t// \tid: `${Date.now()}`,\r\n\t\t\t// \ttype: 'success',\r\n\t\t\t// \tmessage: 'Profile saved successfully',\r\n\t\t\t// \tduration: 5000,\r\n\t\t\t// });\r\n\t\t\treturn response;\r\n\t\t} catch (error) {\r\n\t\t\tconst errorMsg = error as string;\r\n\t\t\tconsole.log(errorMsg);\r\n\t\t\t\r\n\t\t\t\tdispatch(addAlert({\r\n\t\t\t\t\tid: `${Date.now()}`,\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage:  'Failed to save profile',\r\n\t\t\t\t\tduration: 5000,\r\n\t\t\t\t}\r\n\t\t\t))}\r\n\t}, [dispatch]);\r\n                return{\r\n                    profile: profileState.profile,\r\n                    profiles: profileState.profiles,\r\n                    profileLoading: profileState.isLoading,\r\n                    profileError: profileState.error,\r\n                    \r\n                    getCurrentProfile: fetchCurrentProfile,\r\n                    getProfileById: fetchProfileById,\r\n                    createUpdateProfile: saveProfile,\r\n                    clearProfile:()=>dispatch(clearProfile()),\r\n                    clearProfileError:()=>dispatch(clearError())\r\n                }\r\n            };\r\n"],"names":[],"mappings":"AAAA,YAAY;;;;AAIZ;AACA;AACA;AACA;AACA;AANA;;;;;;AAQO,MAAM,aAAa;IACzB,MAAM,WAAW,IAAA,iJAAc;IAC/B,MAAM,eAAe,IAAA,iJAAc,EAAC,CAAC,QAAU,MAAM,OAAO;IAE5D,4DAA4D;IAC5D,MAAM,sBAAsB,IAAA,8NAAW,EAAC;QACvC,IAAI;YACH,MAAM,WAAW,MAAM,SAAS,IAAA,qKAAiB,KAAI,MAAM;YAC3D,IAAG,CAAC,UAAS;gBACZ,IAAA,wJAAQ,EAAC;YACV;YACA,OAAO;QACR,EAAE,OAAO,OAAO;YACf,MAAM,WAAW;YACjB,SACC,IAAA,0JAAQ,EAAC;gBACR,IAAI,GAAG,KAAK,GAAG,IAAI;gBACnB,MAAM;gBACN,SAAS;gBACT,UAAU;YACX;QAEF;IACD,GAAG;QAAC;KAAS;IAEV,MAAM,mBAAmB,IAAA,8NAAW,EAAC,OAAO;QAC9C,IAAI;YACH,MAAM,WAAW,MAAM,SAAS,IAAA,kKAAc,EAAC,SAAS,MAAM;YAC9D,OAAO;QACR,EAAE,OAAO,OAAO;YACf,MAAM,WAAW;YACjB,SACC,IAAA,0JAAQ,EAAC;gBACR,IAAI,GAAG,KAAK,GAAG,IAAI;gBACnB,MAAM;gBACN,SAAS;gBACT,UAAU;YACX;YAED,MAAM;QACP;IACD,GAAG;QAAC;KAAS;IAEV,MAAM,cAAc,IAAA,8NAAW,EAAC,OAAO;QACzC,IAAI;YACH,MAAM,WAAW,MAAM,SAAS,IAAA,uKAAmB,EAAC,cAAc,MAAM;YACxE,aAAa;YACb,wBAAwB;YACxB,oBAAoB;YACpB,0CAA0C;YAC1C,mBAAmB;YACnB,MAAM;YACN,OAAO;QACR,EAAE,OAAO,OAAO;YACf,MAAM,WAAW;YACjB,QAAQ,GAAG,CAAC;YAEX,SAAS,IAAA,0JAAQ,EAAC;gBACjB,IAAI,GAAG,KAAK,GAAG,IAAI;gBACnB,MAAM;gBACN,SAAU;gBACV,UAAU;YACX;QACC;IACJ,GAAG;QAAC;KAAS;IACE,OAAM;QACF,SAAS,aAAa,OAAO;QAC7B,UAAU,aAAa,QAAQ;QAC/B,gBAAgB,aAAa,SAAS;QACtC,cAAc,aAAa,KAAK;QAEhC,mBAAmB;QACnB,gBAAgB;QAChB,qBAAqB;QACrB,cAAa,IAAI,SAAS,IAAA,gKAAY;QACtC,mBAAkB,IAAI,SAAS,IAAA,8JAAU;IAC7C;AACJ"}}]
}